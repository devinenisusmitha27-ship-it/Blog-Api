generator client {
provider = "prisma-client-js"
}


datasource db {
provider = "postgresql"
url = env("DATABASE_URL")
}


model User {
id Int @id @default(autoincrement())
email String @unique
name String
password String
role String @default("user")
posts Post[]
comments Comment[]
createdAt DateTime @default(now())
}


model Post {
id Int @id @default(autoincrement())
title String
slug String @unique
content String
published Boolean @default(false)
author User @relation(fields: [authorId], references: [id])
authorId Int
category Category? @relation(fields: [categoryId], references: [id])
categoryId Int?
comments Comment[]
tags Tag[] @relation("PostTags", references: [id])
createdAt DateTime @default(now())
updatedAt DateTime @updatedAt
}


model Comment {
id Int @id @default(autoincrement())
body String
post Post @relation(fields: [postId], references: [id])
postId Int
author User? @relation(fields: [authorId], references: [id])
authorId Int?
createdAt DateTime @default(now())
}


model Category {
id Int @id @default(autoincrement())
name String @unique
posts Post[]
}


model Tag {
id Int @id @default(autoincrement())
name String @unique
posts Post[] @relation("PostTags")
}
